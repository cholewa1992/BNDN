<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <link rel="stylesheet" href="~/Content/pure.css" />
    <link rel="stylesheet" href="~/Content/bootstrap.min.css" />
    <link rel="stylesheet" href="~/Content/bndn_styles.css" />
    <link rel="stylesheet" href="~/Content/jasny-bootstrap.min.css" />
    <link href="http://cdnjs.cloudflare.com/ajax/libs/x-editable/1.5.0/bootstrap3-editable/css/bootstrap-editable.css" rel="stylesheet" />
    <link rel="stylesheet" href="~/Content/transitions.css" />
    <link rel="stylesheet" href="~/Content/jQuery.Rating.css" />
    @Scripts.Render("~/bundles/jquery")
    @Scripts.Render("~/bundles/modernizr")
    @Scripts.Render("~/Content/bootstrap.min.js")
    @Scripts.Render("~/Content/jasny-bootstrap.min.js")
    @Scripts.Render("http://cdnjs.cloudflare.com/ajax/libs/x-editable/1.5.0/bootstrap3-editable/js/bootstrap-editable.min.js")
    @Scripts.Render("~/Content/jquery.collagePlus.min.js")
    @Scripts.Render("~/Content/jquery.collageCaption.min.js")
    @Scripts.Render("~/Content/jquery.removeWhitespace.min.js")
    @Scripts.Render("~/Content/jquery.rating.pack.js")
    @RenderSection("scripts", required: false)

    <title>@ViewBag.Title</title>
    @model dynamic
    
    <script>

        $(".alert").alert(); // Dismiss alerts


        // All images need to be loaded for this plugin to work so
        // we end up waiting for the whole window to load in this example
        $(window).load(function () {
            $(document).ready(function(){
                collage();
                $('.Collage').collageCaption();
            });
        });


        // Here we apply the actual CollagePlus plugin
        function collage() {
            $('.Collage').collagePlus(
                {
                    'fadeSpeed'     : 2000,
                    'targetHeight'  : 200,
                    'effect'        : 'effect-2',
                    'direction'     : 'vertical',
                    'allowPartialLastRow':true
                }
            );
        };

        // This is just for the case that the browser window is resized
        var resizeTimer = null;
        $(window).bind('resize', function() {
            // hide all the images until we resize them
            $('.Collage .Image_Wrapper').css("opacity", 0);
            // set a timer to re-apply the plugin
            if (resizeTimer) clearTimeout(resizeTimer);
            resizeTimer = setTimeout(collage, 200);
        });

    </script>
</head>
    <body>
        <div id="container">
            <header>
                <div class="pure-menu pure-menu-open pure-menu-horizontal to-left">
                    <a href="~/" class="pure-menu-heading"><img class="logo-header" src="~/Content/img/logo.png"/></a>
                    <ul>
                        <li><a href="~/">Home</a></li>
                        <li><a href="~/Movies">Movies</a></li>
                        <li><a href="~/Books">Books</a></li>
                        <li><a href="~/Music">Music</a></li>
                    </ul>
                </div> 

                <nav>
			        <ul>
				        <li>
                            <div class="search">
                                <form role="form" action="~/Search/SearchMediaItems" method="GET">
                                    <input type="hidden" name="from" value="1" />
                                    <input type="hidden" name="to" value="10" />
                                    <input type="text" class="form-control" name="searchKey" placeholder="Search">
                                    <button class="search-button" type="submit"></button>
                                </form>
                            </div>
                        </li>
                        @if (Request.Cookies["user"] != null) { 
                            <li><button class="btn-success pure-button" onclick="window.location.href='/Account/Details/@Request.Cookies["user"].Values["id"]'">My Account</button></li>
                            <li><button class="pure-button button-art" onclick="window.location.href='/Upload'">Upload</button></li>
                            <li><button class="pure-button button-art" onclick="window.location.href='/Login/Logout'">Logout</button></li>
                        }
                        else
                        {
                            <li><button class="button-art pure-button" onclick="window.location.href='/Login'">Login</button></li>
                            <li><button class="button-art pure-button" onclick="window.location.href='/Account/Register'">Create Account</button></li>
                        }
			        </ul>
		        </nav>

                @if (Request.Url.PathAndQuery == "/")
                {
                    // Maybe a jumbo?
                }
            </header>

                <div class="content-wrapper">
                    @if (TempData["error"] != null)
                    {
                        <div class="alert alert-danger"><strong>Error:</strong> 
                            @TempData["error"]
                            <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
                        </div>
                        
                    }
                    else if (TempData["success"] != null)
                    {
                        <div class="alert alert-success"><strong>Success:</strong> 
                            @TempData["success"]
                            <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
                        </div>
                    }

                    @RenderBody()
                </div>
                <!--<footer></footer>-->
            </div>
    </body>
</html>
